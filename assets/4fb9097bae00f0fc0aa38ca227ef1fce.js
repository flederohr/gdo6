"use strict";document.querySelectorAll(".gdo-flow-file input[type=file], input[type=file].gdo-flow-file").forEach(function(a){var i=new Flow({target:location.href+"&ajax=1&fmt=json&flowField="+a.name,withCredentials:!0,fileParameterName:a.name,singleFile:a.className.indexOf("multiple")<0,testChunks:!1});i.assignBrowse(a),i.on("fileAdded",function(e,n){var t=document.getElementById("gdt-loading-pane");t&&t.classList.remove("done"),setTimeout(i.upload.bind(i),200)}),i.on("fileSuccess",function(n,e){var t=document.getElementById("gdt-loading-pane");t&&t.classList.add("done");var i,t=document.getElementById("gdo-file-preview-"+a.name);if(t){n.file.type&&n.file.type.startsWith("image/")&&t&&((l=document.createElement("DIV")).className="gdo-file-preview",(i=document.createElement("IMG")).src="#",l.appendChild(i),t.appendChild(l),(l=new FileReader).onload=function(e){i.src=e.target.result},l.readAsDataURL(n.file));var l=document.getElementById("gdo-file-input-"+a.name),n=n.file.name+" ("+n.file.size+" bytes)";try{l.value=n,l.innerHTML=n}catch(e){l.innerHTML=n}}else console.error("Cannot find gdo-file-preview-"+a.name)}),i.on("fileError",function(e,n){var t=document.getElementById("gdt-loading-pane");t&&t.classList.add("done"),n=JSON.parse(n),window.GDO.error(n)})});