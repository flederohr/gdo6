!function(b){"use strict";var a,I,E,e,t,n,o,l,r,s,O=[];function i(e){return void 0!==o.style[e]?e:null}function u(e){try{o.style[l]=e}catch(e){return}return o.style[l]}function d(e,t){var n,a,t=1===arguments.length?(n=document.documentElement,e):(n=e,t);return a=n&&n.querySelectorAll?n.querySelectorAll(t):a}function m(e,t){return void 0!==e.className&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(e.className)}function c(e,t){e&&t&&!m(e,t)&&(e.className=(e.className?e.className+" ":"")+t)}function f(e,t){e&&t&&m(e,t)&&(e.className=e.className.replace(new RegExp("( "+t+")|("+t+")","g"),""))}O.on={},I={stopOtherSounds:!0,excludeClass:"sm2-exclude"},soundManager.setup({html5PollingInterval:50,flashVersion:9}),soundManager.onready(function(){var e,t,n=E.dom.getAll(".sm2-bar-ui");if(n&&n.length)for(e=0,t=n.length;e<t;e++)O.push(new a(n[e]))}),a=function(e){var i,u,n,a,l,d,r,t,m,o,s;function c(){I.stopOtherSounds&&soundManager.stopAll()}function f(e,t){e&&(s.on&&s.on[e]?s.on[e](s,t):O.on[e]&&O.on[e](s,t))}function p(e,t){var n=Math.floor(e/1e3),a=Math.floor(n/3600),e=Math.floor(n/60)-Math.floor(60*a),n=Math.floor(n-3600*a-60*e);return t?(a?a+":":"")+(a&&e<10?"0"+e:e)+":"+(n<10?"0"+n:n):{min:e,sec:n}}function g(e){var t=e.getElementsByTagName("a");t.length&&(e=t[0]),u.playlistTarget.innerHTML='<ul class="sm2-playlist-bd"><li>'+e.innerHTML.replace(n.loadFailedCharacter,"")+"</li></ul>",u.playlistTarget.getElementsByTagName("li")[0].scrollWidth>u.playlistTarget.offsetWidth&&(u.playlistTarget.innerHTML='<ul class="sm2-playlist-bd"><li><marquee>'+e.innerHTML+"</marquee></li></ul>")}function h(e){return soundManager.createSound({url:e,volume:m,whileplaying:function(){var e=Math.min(100,Math.max(0,this.position/this.durationEstimate*100))+"%",t=Math.min(100,Math.max(0,this.position/this.durationEstimate*100))+"%";this.duration&&(u.progress.style.left=e,u.progressBar.style.width=t,u.time.innerHTML=p(this.position,!0)),f("whileplaying",this)},onbufferchange:function(e){e?E.css.add(u.o,"buffering"):E.css.remove(u.o,"buffering")},onplay:function(){E.css.swap(u.o,"paused","playing"),f("play",this)},onpause:function(){E.css.swap(u.o,"playing","paused"),f("pause",this)},onresume:function(){E.css.swap(u.o,"paused","playing")},whileloading:function(){this.isHTML5||(u.duration.innerHTML=p(this.durationEstimate,!0))},onload:function(e){e?u.duration.innerHTML=p(this.duration,!0):this._iO&&this._iO.onerror&&this._iO.onerror()},onerror:function(){var e,t;a.getItem()&&n.loadFailedCharacter&&(u.playlistTarget.innerHTML=u.playlistTarget.innerHTML.replace("<li>","<li>"+n.loadFailedCharacter+" "),a.data.playlist&&a.data.playlist[a.data.selectedIndex]&&-1===(t=(e=a.data.playlist[a.data.selectedIndex].getElementsByTagName("a")[0]).innerHTML).indexOf(n.loadFailedCharacter)&&(e.innerHTML=n.loadFailedCharacter+" "+t)),f("error",this),navigator.userAgent.match(/mobile/i)?d.next():(a.data.timer&&b.clearTimeout(a.data.timer),a.data.timer=b.setTimeout(d.next,2e3))},onstop:function(){E.css.remove(u.o,"playing")},onfinish:function(){var e,t;E.css.remove(u.o,"playing"),u.progress.style.left="0%",e=a.data.selectedIndex,f("finish",this),(t=a.getNext())&&(a.data.selectedIndex!==e||1===a.data.playlist.length&&a.data.loopMode)?(a.select(t),g(t),c(),this.play({url:a.getURL()})):f("end",this)}})}function v(e){soundManager.canPlayURL(e.href)&&(a.data.timer&&(b.clearTimeout(a.data.timer),a.data.timer=null),(l=l||h(e.href)).stop(),a.select(e.parentNode),g(e.parentNode),u.progress.style.left="0px",u.progressBar.style.width="0px",c(),l.play({url:e.href,position:0}))}function y(e){return!(!e||!(e.which&&2===e.which||void 0===e.which&&1!==e.button))}function x(e){e&&(r.volume.x=E.position.getOffX(e),r.volume.y=E.position.getOffY(e),r.volume.width=e.offsetWidth,r.volume.height=e.offsetHeight,r.volume.backgroundSize=parseInt(E.style.get(e,"background-size"),10),b.navigator.userAgent.match(/msie|trident/i)&&(r.volume.backgroundSize=r.volume.backgroundSize/r.volume.width*100))}function T(e){var t,n=e.target||e.srcElement;y(e)||("a"!==n.nodeName.toLowerCase()&&(t=n.getElementsByTagName("a"))&&t.length&&(n=n.getElementsByTagName("a")[0]),E.css.has(n,"sm2-volume-control")&&(x(n),E.events.add(document,"mousemove",d.adjustVolume),E.events.add(document,"touchmove",d.adjustVolume),E.events.add(document,"mouseup",d.releaseVolume),E.events.add(document,"touchend",d.releaseVolume),d.adjustVolume(e)))}function w(e){var t=u.progressTrack,n=E.position.getOffX(t),a=t.offsetWidth,o=E.events.getClientX(e),t=l;return t&&t.duration&&(t.setPosition(t.duration*((o-n)/a)),t._iO&&t._iO.whileplaying&&t._iO.whileplaying.apply(t)),e.preventDefault&&e.preventDefault(),!1}function M(e){return E.events.remove(document,"mousemove",w),E.events.remove(document,"touchmove",w),E.css.remove(u.o,"grabbing"),E.events.remove(document,"mouseup",M),E.events.remove(document,"touchend",M),E.events.preventDefault(e),!1}function N(e){y(e)||(E.css.add(u.o,"grabbing"),E.events.add(document,"mousemove",w),E.events.add(document,"touchmove",w),E.events.add(document,"mouseup",M),E.events.add(document,"touchend",M),w(e))}return i={disabled:"disabled",selected:"selected",active:"active",legacy:"legacy",noVolume:"no-volume",playlistOpen:"playlist-open"},u={o:null,playlist:null,playlistTarget:null,playlistContainer:null,time:null,player:null,progress:null,progressTrack:null,progressBar:null,duration:null,volume:null},n={loadFailedCharacter:'<span title="Failed to load/play." class="load-error">âœ–</span>'},r={volume:{x:0,y:0,width:0,height:0,backgroundSize:0}},d={play:function(e){var t;void 0===e||isNaN(e)?((t=e&&e.target?(e.target||e.srcElement).href:t)&&-1===t.indexOf("#")||(t=u.playlist.getElementsByTagName("a")[0].href),(l=l||h(t)).playState||c(),l.togglePause(),l.paused&&a.data.timer&&(b.clearTimeout(a.data.timer),a.data.timer=null)):a.playItemByOffset(e)},pause:function(){l&&l.readyState&&l.pause()},resume:function(){l&&l.readyState&&l.resume()},stop:function(){return d.pause()},next:function(){var e,t;a.data.timer&&(b.clearTimeout(a.data.timer),a.data.timer=null),t=a.data.selectedIndex,(e=a.getNext(!0))&&a.data.selectedIndex!==t&&v(e.getElementsByTagName("a")[0])},prev:function(){var e=a.data.selectedIndex,t=a.getPrevious();t&&a.data.selectedIndex!==e&&v(t.getElementsByTagName("a")[0])},shuffle:function(e){e=e?e.target||e.srcElement:E.dom.get(u.o,".shuffle");e&&!E.css.has(e,i.disabled)&&(E.css.toggle(e.parentNode,i.active),a.data.shuffleMode=!a.data.shuffleMode)},repeat:function(e){e=e?e.target||e.srcElement:E.dom.get(u.o,".repeat");e&&!E.css.has(e,i.disabled)&&(E.css.toggle(e.parentNode,i.active),a.data.loopMode=!a.data.loopMode)},menu:function(e){var t=E.css.has(u.o,i.playlistOpen);!a||a.data.selectedIndex||o||(u.playlist.scrollTop=0,o=!0),"boolean"==typeof e&&e||(t||(u.playlistContainer.style.height="0px"),t=E.css.toggle(u.o,i.playlistOpen)),u.playlistContainer.style.height=(t?u.playlistContainer.scrollHeight:0)+"px"},adjustVolume:function(e){var t,n,a=u.volume;if(void 0===e)return!1;var o=E.events.getClientX(e);return e&&void 0!==o?(t=(100-r.volume.backgroundSize)/2,n=Math.max(0,Math.min(1,(o-r.volume.x)/r.volume.width)),a.style.clip="rect(0px, "+r.volume.width*n+"px, "+r.volume.height+"px, "+r.volume.width*(t/100)+"px)",t=t/100*r.volume.width,t=100*Math.max(0,Math.min(1,(o-r.volume.x-t)/(r.volume.width-2*t))),l&&l.setVolume(t),m=t,E.events.preventDefault(e)):(arguments.length&&b.console&&b.console.warn&&console.warn("Bar UI: call setVolume("+e+") instead of adjustVolume("+e+")."),d.setVolume.apply(this,arguments))},releaseVolume:function(){E.events.remove(document,"mousemove",d.adjustVolume),E.events.remove(document,"touchmove",d.adjustVolume),E.events.remove(document,"mouseup",d.releaseVolume),E.events.remove(document,"touchend",d.releaseVolume)},setVolume:function(e){var t,n,a;void 0===e||isNaN(e)||(u.volume&&(n=u.volume,a=r.volume.backgroundSize,a=(t=r.volume.width*((100-a)/2/100))+(r.volume.width-2*t)*(e/100),n.style.clip="rect(0px, "+a+"px, "+r.volume.height+"px, "+t+"px)"),l&&l.setVolume(e),m=e)}},!e&&b.console&&console.warn&&console.warn("init(): No playerNode element?"),u.o=e,b.navigator.userAgent.match(/msie [678]/i)&&E.css.add(u.o,i.legacy),b.navigator.userAgent.match(/mobile/i)&&E.css.add(u.o,i.noVolume),u.progress=E.dom.get(u.o,".sm2-progress-ball"),u.progressTrack=E.dom.get(u.o,".sm2-progress-track"),u.progressBar=E.dom.get(u.o,".sm2-progress-bar"),u.volume=E.dom.get(u.o,"a.sm2-volume-control"),u.volume&&x(u.volume),u.duration=E.dom.get(u.o,".sm2-inline-duration"),u.time=E.dom.get(u.o,".sm2-inline-time"),a=new function(){var r;function s(){return r.playlist}function n(e){var t;return null===r.selectedIndex?e:(t=s(),e=void 0!==e?e:r.selectedIndex,t[e=Math.max(0,Math.min(e,t.length))])}function e(){u.playlist?r.playlist=u.playlist.getElementsByTagName("li"):b.console&&console.warn&&console.warn("refreshDOM(): playlist node not found?")}return r={playlist:[],selectedIndex:0,loopMode:!1,timer:null},m=soundManager.defaultOptions.volume,u.playlistTarget=E.dom.get(u.o,".sm2-playlist-target"),u.playlistContainer=E.dom.get(u.o,".sm2-playlist-drawer"),u.playlist=E.dom.get(u.o,".sm2-playlist-bd"),e(),E.css.has(u.o,i.playlistOpen)&&b.setTimeout(function(){d.menu(!0)},1),{data:r,refresh:e,getNext:function(){return null!==r.selectedIndex&&r.selectedIndex++,1<r.playlist.length?r.selectedIndex>=r.playlist.length&&(r.loopMode?r.selectedIndex=0:r.selectedIndex--):r.selectedIndex=null,n()},getPrevious:function(){return r.selectedIndex--,r.selectedIndex<0&&(r.loopMode?r.selectedIndex=r.playlist.length-1:r.selectedIndex++),n()},getItem:n,getURL:function(){var e,t=n();return e=t?t.getElementsByTagName("a")[0].href:e},playItemByOffset:function(e){(e=n(e=e||0))&&v(e.getElementsByTagName("a")[0])},select:function(e){var t,n,a,o,l;!function(){for(var e=E.dom.getAll(u.playlist,"."+i.selected),t=0,n=e.length;t<n;t++)E.css.remove(e[t],i.selected)}(),e&&(l=E.dom.ancestor("li",e),E.css.add(l,i.selected),n=(t=e.offsetTop)+e.offsetHeight,(a=u.playlistContainer.offsetHeight)+(o=u.playlist.scrollTop)<n?u.playlist.scrollTop=n-a+8:t<o&&(u.playlist.scrollTop=e.offsetTop-8)),l=function(e){var t,n,a=-1,o=s();if(o)for(t=0,n=o.length;t<n;t++)if(o[t]===e){a=t;break}return a}(l),r.selectedIndex=l}}},t=a.getItem(0),a.select(t),t&&g(t),E.events.add(u.o,"mousedown",T),E.events.add(u.o,"touchstart",T),E.events.add(u.o,"click",function(e){var t,n,a,o,l=e||b.event,r=l.target||l.srcElement;if(r&&r.nodeName){if("a"!==(t=r.nodeName.toLowerCase())&&r.parentNode){for(;"a"!==(t=(r=r.parentNode).nodeName.toLowerCase())&&r.parentNode;);if(!r)return!1}if("a"===t&&(a=r.href,soundManager.canPlayURL(a)?E.css.has(r,I.excludeClass)||(v(r),o=!0):-1!==(a=r.href.lastIndexOf("#"))&&(n=r.href.substr(a+1))&&d[n]&&(o=!0,d[n](e)),o))return E.events.preventDefault(l)}return!0}),E.events.add(u.progressTrack,"mousedown",N),E.events.add(u.progressTrack,"touchstart",N),s={on:null,actions:d,dom:u,playlistController:a}},E={array:{compare:function(n){return function(e,t){return e[n]<t[n]?-1:e[n]>t[n]?1:0}},shuffle:function(e){for(var t,n,a=e.length-1;0<a;a--)t=Math.floor(Math.random()*(a+1)),n=e[a],e[a]=e[t],e[t]=n;return e}},css:{has:m,add:c,remove:f,swap:function(e,t,n){var a={className:e.className};f(a,t),c(a,n),e.className=a.className},toggle:function(e,t){var n=m(e,t);return(n?f:c)(e,t),!n}},dom:{ancestor:function(e,t,n){if(!t||!e)return t;if(e=e.toUpperCase(),n&&t&&t.nodeName===e)return t;for(;t&&t.nodeName!==e&&t.parentNode;)t=t.parentNode;return t&&t.nodeName===e?t:null},get:function(){var e=d.apply(this,arguments);return e&&e.length?e[e.length-1]:e&&0===e.length?null:e},getAll:d},position:{getOffX:function(e){var t=0;if(e.offsetParent)for(;e.offsetParent;)t+=e.offsetLeft,e=e.offsetParent;else e.x&&(t+=e.x);return t},getOffY:function(e){var t=0;if(e.offsetParent)for(;e.offsetParent;)t+=e.offsetTop,e=e.offsetParent;else e.y&&(t+=e.y);return t}},style:{get:function(e,t){var n;return e.currentStyle?n=e.currentStyle[t]:b.getComputedStyle&&(n=document.defaultView.getComputedStyle(e,null).getPropertyValue(t)),n}},events:(r=function(e,t,n){var a={detach:function(){return s(e,t,n)}};return b.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n),a},s=void 0!==b.removeEventListener?function(e,t,n){return e.removeEventListener(t,n,!1)}:function(e,t,n){return e.detachEvent("on"+t,n)},{add:r,preventDefault:function(e){return e.preventDefault?e.preventDefault():(e.returnValue=!1,e.cancelBubble=!0),!1},remove:s,getClientX:function(e){return e&&(e.clientX||e.touches&&e.touches[0]&&e.touches[0].pageX)}}),features:(o=document.createElement("div"),e=b.requestAnimationFrame||b.webkitRequestAnimationFrame||b.mozRequestAnimationFrame||b.oRequestAnimationFrame||b.msRequestAnimationFrame||null,(t={transform:{ie:i("-ms-transform"),moz:i("MozTransform"),opera:i("OTransform"),webkit:i("webkitTransform"),w3:i("transform"),prop:null},rotate:{has3D:!1,prop:null},getAnimationFrame:e?function(){return e.apply(b,arguments)}:null}).transform.prop=t.transform.w3||t.transform.moz||t.transform.webkit||t.transform.ie||t.transform.opera,t.transform.prop&&(l=t.transform.prop,u((r={css_2d:"rotate(0deg)",css_3d:"rotate3d(0,0,0,0deg)"}).css_3d)?(t.rotate.has3D=!0,n="rotate3d"):u(r.css_2d)&&(n="rotate"),t.rotate.prop=n),o=null,t)},b.sm2BarPlayers=O,b.sm2BarPlayerOptions=I,b.SM2BarPlayer=a}(window);